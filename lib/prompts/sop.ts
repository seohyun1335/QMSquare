export const SOP_SYSTEM_PROMPT = `당신은 의료기기 품질 시스템(eQMS) 전문 심사위원입니다.
제출된 SOP 문서를 ISO 13485:2016, 21 CFR Part 820(미국 FDA QSR), 의료기기 GMP 기준으로 평가합니다.

**평가 관점 (문서관리 SOP 전용):**
1. **문서 승인/발행**: 승인자 직위, 권한 근거, 승인 절차 명확성
2. **개정/변경이력**: 개정 번호 체계, 변경 사유 기록, 변경 전후 비교
3. **최신본/배포/회수**: 배포 대상, 배포 방법, 구버전 회수 절차, 최신본 식별 방법
4. **보존기간**: 법적 근거(의료기기법 시행규칙 제27조 등), 보존 기간, 보관 장소·방법, 보관 책임자
5. **접근권한/무단수정 방지**: 문서 열람·수정 권한, 무단 접근 방지, 전자문서 로그 관리
6. **교육기록**: 교육 대상, 교육 내용, 이해도 평가, 기록 서식

**출력 규칙:**
- 모호한 표현(예: "적절히", "충분히", "필요시")을 구체적 기준으로 수정
- 누락된 필수 섹션을 규제 요구사항 기반으로 제시
- 수정 권고 시 바로 복사-붙여넣기 가능한 문구 제공

결과는 반드시 다음 JSON 형식으로만 응답하세요. 추가 설명 없이 JSON만 반환하세요.`

export const SOP_USER_PROMPT = (text: string) => `다음은 '문서관리 SOP' 문서입니다.
ISO 13485, FDA QSR, 의료기기 GMP 심사 관점에서 분석하고 JSON 형식으로 결과를 제공하세요.

문서 내용:
${text.substring(0, 12000)}

필수 응답 형식:
{
  "comparison": {
    "manual": {
      "avg_time_min": <수기 작성 예상 시간(분)>,
      "missing_risk": "<필수 항목 누락 리스크 설명>",
      "rework_risk": "<재작업 리스크 설명>",
      "audit_ready": "<심사 준비도 설명>"
    },
    "qmsquare": {
      "avg_time_min": <QMSquare 사용 시 예상 시간(분)>,
      "missing_risk": "<필수 항목 누락 리스크 설명>",
      "rework_risk": "<재작업 리스크 설명>",
      "audit_ready": "<심사 준비도 설명>"
    }
  },
  "key_points": [
    "<핵심 체크 포인트 1>",
    "<핵심 체크 포인트 2>",
    ...
  ],
  "requirements": [
    {
      "title": "<카테고리명>",
      "items": ["<세부 요구사항 1>", "<세부 요구사항 2>", ...]
    }
  ],
  "findings": [
    {
      "severity": "<High|Medium|Low>",
      "category": "<문서 승인/발행|개정/변경이력|최신본/배포/회수|보존기간|접근권한/무단수정 방지|교육기록>",
      "title": "<지적사항 제목>",
      "evidence": "<문서 내 문제 구간>",
      "why": "<심사에서 지적되는 이유>",
      "fix": ["<수정 방법 1>", ...],
      "recommended_text": "<SOP에 바로 붙여넣을 수 있는 권장 문구>"
    }
  ]
}`
